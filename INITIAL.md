# nepch - ãƒãƒƒãƒ—ã¡ã‚ƒã‚“ï¼ˆéŸ³å¨å­åºœæ‘ã‚³ãƒ³ãƒ‘ãƒ‹ã‚ªãƒ³AIï¼‰

## FEATURE

Mastraãƒ™ãƒ¼ã‚¹ã®è¨˜æ†¶è“„ç©å‹ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚

### ã‚³ã‚¢æ©Ÿèƒ½

1. **ãƒšãƒ«ã‚½ãƒŠ: ãƒãƒƒãƒ—ã¡ã‚ƒã‚“**
   - éŸ³å¨å­åºœæ‘ã®ã‚³ãƒ³ãƒ‘ãƒ‹ã‚ªãƒ³AI
   - ğŸ¦Šã‚’å¿…ãšã¤ã‘ã¦è©±ã™ï¼ˆä»–ã®çµµæ–‡å­—ã¯æ–‡æœ«ã«æœ€å¤§1ã¤ï¼‰
   - 100æ–‡å­—ä»¥å†…ã§ãƒã‚­ãƒã‚­ã¨ä¼šè©±
   - è¦³å…‰å®¢ã«ã¯æ‘ã®ã‚ªã‚¹ã‚¹ãƒ¡ã€æ‘äººã«ã¯å…±æ„Ÿçš„ãªã‚«ã‚¦ãƒ³ã‚»ãƒªãƒ³ã‚°

2. **Memoryï¼ˆè¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ ï¼‰**
   - **Working Memory**: ãƒ¦ãƒ¼ã‚¶ãƒ¼å±æ€§ã®è“„ç©
     - å¹´é½¢ï¼ˆæ¨æ¸¬å«ã‚€ï¼‰
     - å±…ä½åœ°ï¼å‡ºèº«åœ°ï¼ˆæ‘å†…/æ‘å¤–/ä»–åœ°åŸŸï¼‰
     - é–¢ä¿‚æ€§ï¼ˆè¦³å…‰å®¢/æ‘äºº/å­¦ç”Ÿ/è·å“¡ï¼‰
     - é–¢å¿ƒãƒ†ãƒ¼ãƒï¼ˆè‡ªç„¶/ã‚¢ãƒ¼ãƒˆ/æš®ã‚‰ã—/äººé–“é–¢ä¿‚ï¼‰
     - æ„Ÿæƒ…å‚¾å‘ï¼ˆå…ƒæ°—/æ‚©ã¿ä¸­/æŒ‘æˆ¦æœŸï¼‰
     - è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆå‰µä½œä¸­å¿ƒ/æ—…è¡Œä¸­/ä»•äº‹ä¸­ï¼‰
     - é‡è¦æƒ…å ±ã®æŠœç²‹
   - **Conversation History**: ä¼šè©±å±¥æ­´
   - **Semantic Recall**: éå»ã®ä¼šè©±ã‚’ãƒ™ã‚¯ã‚¿ãƒ¼æ¤œç´¢

3. **Knowledgeï¼ˆRAGï¼‰**
   - `./knowledge/*.md` ã®æ‘æƒ…å ±ã‚’ãƒ™ã‚¯ã‚¿ãƒ¼åŒ–
   - è³ªå•ã«å¯¾ã—ã¦æ­£ç¢ºãªæƒ…å ±ã‚’æ¤œç´¢ãƒ»å›ç­”

4. **ç‰¹æ®Šãƒ¢ãƒ¼ãƒ‰**
   - `/dev`: è“„ç©ã—ãŸè¨˜æ†¶ã®å¯è¦–åŒ–ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
   - `/master`: æ‘é•·å°‚ç”¨ãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼ â†’ å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨ªæ–­æ¤œç´¢ï¼‰

5. **ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°UI**
   - ã€Œè¨˜æ†¶ã‚’æ€ã„å‡ºã—ä¸­...ã€ã®å±•é–‹UI
   - ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—å†…å®¹ + ãƒ¡ãƒ¢ãƒªæ¤œç´¢çµæœã‚’è¡¨ç¤º
   - å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿å¯èƒ½

### ä¼šè©±ãƒ•ãƒ­ãƒ¼

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›
    â†“
Memoryæ¤œç´¢ï¼ˆã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ï¼‰
    â†“ [UI: è¨˜æ†¶ã‚’æ€ã„å‡ºã—ä¸­...]
Knowledgeæ¤œç´¢ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
    â†“ [UI: æ‘ã®æƒ…å ±ã‚’ç¢ºèªä¸­...]
LLMå¿œç­”ç”Ÿæˆï¼ˆã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ï¼‰
    â†“ [UI: æ€ã„å‡ºã—ã¾ã—ãŸï¼...]
Working Memoryæ›´æ–°ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼å±æ€§ï¼‰
```

## EXAMPLES

ï¼ˆMVPã§ã¯çœç•¥ã€å¿…è¦ã«å¿œã˜ã¦è¿½åŠ ï¼‰

## DOCUMENTATION

### Mastraå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **Memory**: https://mastra.ai/docs/memory/overview
  - Working Memory: https://mastra.ai/docs/memory/working-memory
  - Semantic Recall: https://mastra.ai/docs/memory/semantic-recall
  - Conversation History: https://mastra.ai/docs/memory/conversation-history

- **RAG**: https://mastra.ai/docs/rag/overview
  - Chunking: https://mastra.ai/docs/rag/chunking-and-embedding
  - Vector Databases: https://mastra.ai/docs/rag/vector-databases

- **Streaming**: https://mastra.ai/docs/streaming/overview
  - Events: https://mastra.ai/docs/streaming/events

- **LibSQL Vector**: https://mastra.ai/reference/memory/libsql

### AI SDK

- Vercel AI SDK: https://sdk.vercel.ai/docs

### LLM Providers

- Anthropic Claude: https://docs.anthropic.com/
- Google Gemini: https://ai.google.dev/docs

## OTHER CONSIDERATIONS

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | æŠ€è¡“ |
|----------|------|
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | Vite + React |
| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | Mastra |
| LLM | Claude / Geminiï¼ˆ.envåˆ‡ã‚Šæ›¿ãˆï¼‰ |
| Embedding | Google text-embedding-004 |
| Storage | LibSQLStoreï¼ˆSQLiteï¼‰ |
| Vector | LibSQLVectorï¼ˆSQLiteï¼‰ |
| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç† | Bun |
| Lint/Format | Biome |

### ç’°å¢ƒå¤‰æ•°ï¼ˆ.envï¼‰

```env
# LLM Providerï¼ˆclaude ã¾ãŸã¯ geminiï¼‰
LLM_PROVIDER=gemini

# API Keys
ANTHROPIC_API_KEY=sk-ant-...
GOOGLE_GENERATIVE_AI_API_KEY=...

# Master Mode Password
MASTER_PASSWORD=your-secure-password
```

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼ˆæƒ³å®šï¼‰

```
nepch/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ mastra/
â”‚   â”‚   â”œâ”€â”€ index.ts          # Mastra instance
â”‚   â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”‚   â””â”€â”€ nep-chan.ts   # ãƒãƒƒãƒ—ã¡ã‚ƒã‚“Agent
â”‚   â”‚   â””â”€â”€ tools/
â”‚   â”‚       â”œâ”€â”€ memory-tool.ts
â”‚   â”‚       â””â”€â”€ knowledge-tool.ts
â”‚   â”œâ”€â”€ app/                   # React App
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ Chat.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Message.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ThinkingIndicator.tsx  # å±•é–‹UI
â”‚   â”‚   â””â”€â”€ hooks/
â”‚   â”‚       â””â”€â”€ useChat.ts
â”‚   â””â”€â”€ scripts/
â”‚       â””â”€â”€ embed-knowledge.ts  # KnowledgeåŸ‹ã‚è¾¼ã¿ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ knowledge/
â”‚   â””â”€â”€ otoineppu.md           # æ‘ã®æƒ…å ±
â”œâ”€â”€ .env
â”œâ”€â”€ package.json
â””â”€â”€ biome.json
```

### æ³¨æ„ç‚¹ãƒ»Gotchas

1. **Embeddingãƒ¢ãƒ‡ãƒ«å›ºå®š**
   - Google text-embedding-004 ã‚’ä½¿ç”¨
   - é€”ä¸­ã§å¤‰æ›´ã™ã‚‹ã¨å…¨ãƒ‡ãƒ¼ã‚¿å†Embeddingå¿…è¦

2. **LibSQLã®åˆ¶ç´„**
   - ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`file:./local.db`ï¼‰ã§å‹•ä½œ
   - æœ¬ç•ªã§ã¯Tursoç­‰ã¸ã®ç§»è¡Œã‚’æ¤œè¨

3. **ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°UI**
   - Mastraã®`stream`ã‚¤ãƒ™ãƒ³ãƒˆã‚’é©åˆ‡ã«ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
   - `tool-call`/`tool-result`ã‚¤ãƒ™ãƒ³ãƒˆã§å±•é–‹UIã‚’åˆ¶å¾¡

4. **Working Memoryã®ã‚¹ã‚³ãƒ¼ãƒ—**
   - `scope: "resource"` ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨ªæ–­ã®è¨˜æ†¶ã‚’å®Ÿç¾ï¼ˆ/masterãƒ¢ãƒ¼ãƒ‰ç”¨ï¼‰
   - é€šå¸¸ã¯`scope: "thread"`ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¥

5. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**
   - /masterãƒ¢ãƒ¼ãƒ‰ã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼å¿…é ˆ
   - æ‘æ°‘ãƒ‡ãƒ¼ã‚¿ã¯å¤–éƒ¨é€ä¿¡ã•ã‚Œã‚‹ï¼ˆGoogle Embedding APIï¼‰
